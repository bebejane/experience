{"version":3,"sources":["components/Button.js","components/SourceCard.js","components/Loading.js","components/FeedArticleTools.js","components/FeedArticle.js","components/FeedCard.js","components/SearchCard.js","components/Search.js","components/Error.js","history.js","components/App.js","index.js"],"names":["Button","props","state","icon","toggle","togle","disabled","e","this","onClick","size","className","style","undefined","nextProps","prevState","Component","SourceCard","id","unread","count","name","url","selected","notools","refreshing","edit","setState","console","log","target","value","newName","onUpdate","preventDefault","onRemove","onRefresh","loading","key","onSubmit","type","onChange","readOnly","deleteFeed","Loading","message","term","FeedArticleTools","view","article","read","onToggleRead","_id","onOpen","onToggleView","fullView","FeedArticle","feed","link","content","time","title","dangerouslySetInnerHTML","__html","contentSnippet","FeedCard","articles","forEach","a","moment","pubDate","fromNow","length","map","idx","SearchCard","site","host","parse","hostname","Search","matches","formRef","React","createRef","urlRef","fetch","encodeURIComponent","then","res","json","google","catch","err","error","ref","placeholder","autoComplete","m","Error","show","onClose","createBrowserHistory","App","feedId","loadingFeeds","feeds","search","page","pages","init","path","data","opt","method","toUpperCase","axios","newErr","response","status","request","api","toggleRead","history","replace","setTimeout","window","location","allRead","filter","newArticles","silent","newState","push","pos","listen","action","attempts","test","f","loadingFeed","addFeed","loadFeed","refreshFeed","updateFeed","browse","toggleAllRead","openLink","onErrorClose","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dc3cb0b6.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport './Button.css'\n\nclass Button extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            icon:props.icon,\n            toggle:props.togle,\n            disabled:props.disabled\n        };\n    }\n    onClick(e){\n        this.props.onClick(e)\n    }\n    componentDidMount() {\n\n    }\n    static getDerivedStateFromProps(nextProps, prevState) {\n        return nextProps\n    }\n\n    render() {\n        const {icon, toggle, disabled, size} = this.state\n\n        return (\n            <div className={'button'} style={size ? {\"fontSize\": size} : undefined} disabled={disabled} onClick={(e)=>this.onClick(e)}>\n                {icon}\n            </div>\n        );\n    }\n}\n\nexport default Button;\n","import React, { Component } from \"react\";\nimport \"./SourceCard.css\";\n\nclass SourceCard extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            id:props.id,\n            unread:props.unread,\n            count:props.count,\n            name:props.name,\n            url:props.url,\n            selected:props.selected,\n            notools:props.notools,\n            refreshing:props.refreshing,\n            edit:false\n        };\n    }\n    onClick(id){\n        if(this.state.selected)\n            this.setState({edit:this.state.name})\n        else\n            this.setState({selected:true, edit:false}, ()=>this.props.onClick(id))\n    }\n    onChange(e){\n        console.log(e.target.value)\n        this.setState({edit:e.target.value})\n    }\n    onSubmit(e){\n        const newName = this.state.edit;\n        this.setState({selected:true, edit:false, name:newName}, ()=>{\n            this.props.onUpdate(this.state.id, newName)\n        })\n        e.preventDefault()\n    }\n    deleteFeed(id) {\n        this.props.onRemove()\n    }\n    refreshFeed(id){\n        this.props.onRefresh(id)\n        this.setState({refreshing:true})\n    }\n    componentDidMount() {\n\n    }\n    static getDerivedStateFromProps(nextProps, prevState) {\n        return nextProps\n    }\n\n    render() {\n        const {name, id, selected, notools, unread, edit} = this.state\n        const loading = this.state.loading\n\n        if(loading)\n            return <div className={'loading'}><div>{loading}</div></div>\n        return (\n            <div key={id} className={'source-card' + (selected ? ' source-card-selected' : '')}>\n                <div className={'source-card-unread'}>{unread}</div>\n                <form onSubmit={(e)=>this.onSubmit(e)}>\n                    <input type=\"text\" className={'source-card-title'} value={edit || name} onChange={(e)=>this.onChange(e)} readOnly={!edit} onClick={()=>this.onClick(id)}/>\n                </form>\n                {!notools &&\n                    <div className={'source-card-tools'}>\n                        <div className={'source-card-tool'} onClick={()=>this.deleteFeed(id)}>-</div>\n                    </div>\n                }\n            </div>\n        );\n    }\n}\n\nexport default SourceCard;\n","import React, { Component } from \"react\";\nimport './Loading.css'\nimport {AiOutlineReload} from 'react-icons/ai'\n\nclass Loading extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            message:props.term,\n            loading:props.loading,\n        };\n    }\n\n    componentDidMount() {\n\n    }\n    static getDerivedStateFromProps(nextProps, prevState) {\n        return nextProps\n    }\n\n    render() {\n        const {message, loading} = this.state\n        if(!loading)\n            return null\n\n        return (\n            <div className={'loading'}>\n                {message && <div className={'loading-message'}>{message}</div>}\n                <div className={'loading-icon'}><AiOutlineReload className={'icon-spin'}/></div>\n            </div>\n        );\n    }\n}\n\nexport default Loading;\n","import React, { Component } from \"react\";\nimport {AiOutlineArrowRight, AiOutlineCheck} from 'react-icons/ai'\nimport {FiChevronDown, FiChevronUp} from 'react-icons/fi'\n\nimport Button from './Button'\nimport \"./FeedArticleTools.css\";\n\nclass FeedArticleTools extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            id:props.id,\n            view:props.view,\n            article:props.article\n        };\n    }\n    onClick(id, url){\n        this.setState({selected:this.state.id})\n        this.props.onClick(url)\n        //window.location = url\n    }\n    onToggleRead(){\n        const read = !this.state.article.read\n        this.props.onToggleRead(this.state.article._id, read)\n        this.setState({article:{...this.state.article, read:read}})\n    }\n    deleteFeed(id) {\n        this.props.onRemove()\n    }\n    refresh(){\n\n    }\n    onRead(){\n\n    }\n    onOpen(){\n        this.props.onOpen()\n    }\n    onToggleView(){\n        this.props.onToggleView(this.state.id)\n    }\n    componentDidMount() {\n\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState) {\n        return nextProps\n    }\n\n    render() {\n        const fullView = this.state.view === 'full'\n\n        return (\n            <div className={'feed-card-tools'}>\n                <Button onClick={(e)=>this.onToggleView(e)} icon={fullView ? <FiChevronUp/> : <FiChevronDown/>}/>\n                {fullView &&\n                    <div>\n                        <Button onClick={(e)=>this.onToggleRead(e)} icon={<AiOutlineCheck/>}/>\n                        <Button onClick={(e)=>this.onOpen(e)} icon={<AiOutlineArrowRight/>}/>\n                    </div>\n                }\n            </div>\n        );\n    }\n}\n\nexport default FeedArticleTools;\n","import React, { Component } from \"react\";\nimport FeedArticleTools from './FeedArticleTools'\nimport \"./FeedArticle.css\";\n\nclass FeedArticle extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            id: props.id,\n            feed: props.feed,\n            article: props.article,\n            view:props.view,\n            refreshing: props.refreshing,\n            fullView: props.view === 'full'\n        };\n    }\n    onClick(url) {\n        console.log(this.state.article)\n        this.setState({ selected: this.state.article._id, url: url })\n        this.props.onClick(this.state.article._id, this.state.article.link)\n    }\n    onToggleRead() {\n        const read = !this.state.article.read\n        this.props.onToggleRead(this.state.article._id, read)\n        this.setState({ article: { ...this.state.article, read: read } })\n    }\n    onToggleView() {\n        console.log('toggle')\n        this.setState({ fullView: !this.state.fullView})\n    }\n    deleteFeed(id) {\n        this.props.onRemove()\n    }\n    refresh() {\n\n    }\n    componentDidMount() {\n\n    }\n    contentSnippet(article) {\n\n        return article.content\n        let snippet = article.contentSnippet || article.content || '';\n\n        if(!snippet)\n            return ''\n\n        let sentances = snippet.split('.')\n\n        if (sentances.length > 1)\n            snippet = sentances.slice(0, 2).join('.')\n        else\n            snippet = snippet.substring(0, 100) + '...'\n\n        return snippet\n    }\n    static getDerivedStateFromProps(nextProps, prevState) {\n        if(nextProps.view !== prevState.view)\n            return {...nextProps, fullView:nextProps.view === 'full'} \n        else\n            return nextProps\n    }\n\n    render() {\n        const { article, selected, view ,feed, fullView} = this.state\n\n        return (\n            <div className={'feed-card' + (selected === article._id ? ' feed-card-selected' : '')}>\n                <div className={'feed-card-left' + (article.read ? ' feed-card-read' : '')}  onClick={()=>this.onClick(article._id, article.link)}>\n                    <div className={'feed-card-title'}>\n                        <div className={'feed-card-date'}>{article.time} - {feed}</div>\n                        {article.title}\n                            <div\n                                className={'feed-card-content'}\n                                dangerouslySetInnerHTML={{ __html: fullView ? article.content : article.contentSnippet}}>\n                            </div>\n                    </div>\n                </div>\n                <div className={'feed-card-right'}>\n                    <FeedArticleTools\n                        article={article}\n                        view={fullView ? 'full' : 'mini'}\n                        onToggleRead={(read)=>this.onToggleRead()}\n                        onToggleView={()=>this.onToggleView()}\n                        onOpen={()=>this.onClick(article.link)}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default FeedArticle;\n","import React, { Component } from \"react\";\nimport Loading from './Loading'\nimport FeedArticle from './FeedArticle'\nimport moment from 'moment'\nimport \"./FeedCard.css\";\n\nclass FeedCard extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            id:props.id,\n            name:props.name,\n            view:props.view,\n            url:props.url,\n            selected:props.selected,\n            articles:props.articles || [],\n            refreshing:props.refreshing,\n        };\n    }\n    onClick(id, url){\n        this.setState({selected:id, url:url})\n        this.props.onClick(id, url)\n    }\n    onToggleRead(id, read){\n        this.props.onToggleRead(id, read)\n    }\n    deleteFeed(id) {\n        this.props.onRemove()\n    }\n    refresh(){\n\n    }\n    componentDidMount() {\n\n    }\n    static getDerivedStateFromProps(nextProps, prevState) {\n        return nextProps\n    }\n\n    render() {\n        const {refreshing, articles, view, name} = this.state\n\n        articles.forEach((a)=>{\n            a.time = moment(a.pubDate).fromNow()\n        })\n\n        if(articles.length === 0)\n            return <div className={'empty'}><div>Nothing heree</div></div>\n\n        return (\n            <div className={'feed'}>\n                {refreshing && <Loading message={'Loading feed...'} loading={true}/>}\n                {!refreshing && articles.map((a, idx)=>\n                    <FeedArticle\n                        key={idx} \n                        article={a}\n                        view={view}\n                        feed={a.feed ? a.feed.name : name}\n                        onClick={(id, link)=>this.onClick(a._id, link)} \n                        onToggleRead={(id, read)=>this.onToggleRead(id, read)}\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nexport default FeedCard;\n","import React, { Component } from \"react\";\nimport url from \"url\"\nimport \"./SearchCard.css\";\n\nclass SearchCard extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            site:props.site,\n            title:props.title,\n            link:props.link,\n        };\n    }\n    onClick(link){\n        this.props.onClick(link)\n    }\n    addFeed(){\n\n    }\n    componentDidMount() {\n\n    }\n    static getDerivedStateFromProps(nextProps, prevState) {\n        return nextProps\n    }\n\n    render() {\n        const {title, link} = this.state\n        const host = url.parse(this.state.link).hostname\n        return (\n            <div className={'search-card'} onClick={()=>this.onClick(link)}>\n                <div className={'search-card-title'}>\n                    {title}\n                    <div className={'search-card-link'}>{host}</div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default SearchCard;\n","import React, { Component } from \"react\";\nimport SearchCard from \"./SearchCard\";\nimport {AiOutlineLoading} from 'react-icons/ai'\nimport './Search.css'\n\nclass Search extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            term:props.term,\n            loading:false,\n            url:'',\n            matches: []\n        };\n        this.formRef = React.createRef();\n        this.urlRef = React.createRef();\n    }\n    onClick(url){\n        this.setState({loading:false, matches:[], url:''})\n        this.props.onClick(url)\n    }\n    onSubmit(e){\n        e.preventDefault()\n        this.setState({loading:'Loading search'})\n        fetch('http://localhost:3001/api/search/'+encodeURIComponent(this.state.url))\n            .then(res => res.json())\n            .then(res => {\n                this.setState({ matches: res.google })\n            })\n            .catch(err => console.error(err))\n            .then(()=>this.setState({loading:false}))\n    }\n    onChange(e){\n        this.setState({[e.target.id]: e.target.value });\n    }\n    refresh(){\n\n    }\n    componentDidMount() {\n\n    }\n    static getDerivedStateFromProps(nextProps, prevState) {\n        return nextProps\n    }\n\n    render() {\n        const {matches, loading} = this.state\n\n        return (\n            <div className={'search-container'}>\n                <form ref={this.formRef} onSubmit={(e)=>this.onSubmit(e)}>\n                    <input\n                        className={'form-add'}\n                        placeholder=\"Add blog...\"\n                        ref={this.urlRef}\n                        onChange={(e)=>this.onChange(e)}\n                        value={this.state.url}\n                        autoComplete=\"off\"\n                        type=\"text\"\n                        id=\"url\"\n                    />\n                </form>\n                <div className={'search-result'}>\n                    {loading && <div className={'search-loading'}><AiOutlineLoading className='icon-spin'/></div>}\n                    {!loading && matches.map((m, idx)=>\n                        <SearchCard\n                            key={idx}\n                            site={m}\n                            title={m.title}\n                            link={m.link}\n                            onClick={()=>this.onClick(m.link)}\n                        />\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Search;\n","import React, { Component } from \"react\";\nimport './Error.css'\n//import {AiOutlineReload} from 'react-icons/ai'\n\nclass Error extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            error:props.error,\n            show:true\n        };\n    }\n    onClose(){\n        this.props.onClose()\n    }\n    componentDidMount() {\n\n    }\n    static getDerivedStateFromProps(nextProps, prevState) {\n        return nextProps\n    }\n\n    render() {\n        const {error, show} = this.state\n        if(!error) return null\n\n        return (\n            <div className={'error-wrap'}>\n                <div className={'error-modal'}>\n                    <div className={'error-header'}>Error</div>\n                    <div className={'error-content'}>\n                        <div className={'error-message'}>{error.message} ({error.type})</div>\n                        <div className={'error-bottom'}>\n                            <button onClick={()=>this.onClose()}>close</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Error;\n","import { createBrowserHistory } from \"history\";\nexport default createBrowserHistory();\n","import React, { Component } from \"react\";\nimport Button from './Button'\nimport SourceCard from './SourceCard'\nimport FeedCard from './FeedCard'\nimport Search from './Search'\nimport Error from './Error'\nimport Loading from './Loading'\nimport axios from \"axios\"\nimport history from '../history'\n\nimport { IoIosRefresh } from 'react-icons/io'\nimport { BsCheckAll } from 'react-icons/bs'\nimport { FiChevronDown, FiChevronUp } from 'react-icons/fi'\n\nimport \"./App.css\";\n\nclass App extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            url: '',\n            feedId: null,\n            loading: false,\n            loadingFeeds: true,\n            refreshing: false,\n            articles: [],\n            feeds: [],\n            search: [],\n            page: 1,\n            pages: 1,\n            init: false,\n            view:'full',\n            error:null\n        };\n    }\n\n    api(path, data = {}, opt = { method: 'get' }) {\n        console.log(opt.method.toUpperCase(), path, data)\n        return axios({\n            method: opt.method || 'get',\n            url: \"http://localhost:3001/api\" + path,\n            data: data\n        }).then((res) => {\n            if(!res) return\n            console.log(res.data)\n            return res\n        }).catch((error)=>{\n\n            let newErr = error;\n\n            if (error.response) {\n              // The request was made and the server responded with a status code\n              // that falls out of the range of 2xx\n              console.log('response error')\n              newErr = {...error.response.data, status:error.response.status, type:1}\n            } else if (error.request) {\n              // The request was made but no response was received\n              // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n              // http.ClientRequest in node.js\n              console.log('request error')\n              newErr = {message:'Request error: ' + error.message, status:error.request.status, type:2}\n            } else {\n              // Something happened in setting up the request that triggered an Error\n              newErr.type = 3\n              console.log('network error')\n            }\n            console.log(newErr, error)\n            this.setState({error:newErr})\n            throw new Error(newErr)\n          });\n    }\n    addFeed(url) {\n        if (!url) return\n        const data = { url: url }\n        console.log('add feed', url)\n        this.setState({ loadingFeeds: 'Adding feed...', search: [] })\n        return this.api('/feed', data, { method: 'post' })\n            .then((res) => {\n                console.log(res)\n                return this.feeds().then(() => {\n                    return this.feed(res.data._id)\n                })\n            })\n            .catch((err) => this.setState({loadingFeeds:false}))\n    }\n    updateFeed(id, name) {\n\n        return this.api('/feed', { _id: id, name: name }, { method: 'patch' })\n            .then((res) => {\n                const articles = this.state.articles.map((a) => res.data._id === a._id ? res.data : a)\n                this.setState({ articles: articles })\n                return res\n            })\n            .then(() => this.feeds(true))\n            .catch((err) => {})\n    }\n    deleteFeed(id) {\n\n        return this.api('/feed', { _id: id }, { method: 'delete' })\n            .then((res) => {\n                if (id === this.state.feedId)\n                    this.setState({ articles: [], feedId: null })\n                return res\n            })\n            .then(() => this.feeds())\n            .catch((err) => {})\n\n    }\n    refreshFeed(id) {\n\n        this.setState({ refreshing: id })\n\n        return this.api('/feed/' + id + '/refresh', {}, { method: 'get' })\n            .then((res) => {\n                if (id === this.state.feedId)\n                    this.setState({ articles: res.data })\n                return res\n            })\n            .then(() => this.feeds(true))\n            .catch((err) => {})\n            .then(() => this.setState({ refreshing: false }))\n    }\n    loadFeed(id) {\n        this.setState({ refreshing: true })\n        this.feed(id).then((articles) => {\n\n        })\n        .catch((err) => {})\n        .then(() => this.setState({ refreshing: false }))\n    }\n    openLink(id, link) {\n        console.log('open link', link, id)\n\n        const feedId = this.state.feedId\n        const page = this.state.page\n        this.toggleRead(feedId, id, true).then((article) => {\n            history.replace('/feed/' + feedId + '/page/'+page, this.state)\n            setTimeout(() => window.location = link, 1000)\n        }).catch((err) => this.setState({error:err}))\n    }\n    onToggleRead(feedId, id, read) {\n        this.toggleRead(feedId, id, read)\n            .then(() => this.feeds(true))\n            .catch((err) => {})\n    }\n    toggleRead(feedId, id, read) {\n\n        return this.api('/feed/' + feedId, { _id: id, read: read }, { method: 'patch' })\n            .then((res) => {\n                const articles = this.state.articles.map((a) => res.data._id === a._id ? res.data : a)\n                this.setState({ articles: articles })\n                return res\n            })\n            .catch((err) => {\n                throw err\n            })\n    }\n    toggleAllRead(feedId,) {\n\n        const articles = this.state.articles;\n        const allRead = articles.filter((a)=>a.read).length\n        const newArticles = articles.map((a) => {\n            return { read: allRead ? false : true, _id: a._id }\n        })\n\n        return this.api('/feed/' + feedId, newArticles, { method: 'patch' })\n            .then((res) => this.setState({ articles: res.data }))\n            .catch((err) => {\n                throw err\n            })\n\n    }\n    feeds(silent) {\n\n        this.setState({ loadingFeeds: !silent ? true:false })\n        return this.api('/feed', {}, { method: 'get' })\n            .then(res => this.setState({ feeds: res.data }))\n            .catch((err) => {\n                throw err\n            })\n            .then(() => this.setState({ loadingFeeds: false }))\n    }\n    feed(id, opt = { page: 1 }) {\n\n        this.setState({ refreshing: id })\n        return this.api('/feed/' + id + '/page/' + opt.page, {}, { method: 'get' })\n            .then(res => {\n                const articles = res.data.data;\n                const page = res.data.page\n                const pages = res.data.pages\n\n                const newState = { ...this.state, feedId: id, articles: articles, refreshing: false, page: page, pages:pages}\n                history.push('/feed/' + id + '/page/' + opt.page, newState)\n                this.setState(newState)\n                return res.data\n            })\n            .catch((err) => {\n                console.error(err)\n                throw err\n            })\n            .then((res) => {\n                this.setState({ refreshing: false });\n                console.log('then')\n                return res;\n            })\n    }\n    browse(pos) {\n        let page = this.state.page + pos\n        let pages = this.state.pages;\n        if(page>pages || page <=0) return\n\n        this.feed(this.state.feedId, { page: page }).then((data) => {\n\n            const articles = data.data;\n            if (!articles.length) {\n                this.setState({ page: data.page - 1 })\n            } else\n                this.setState({ articles: articles, page: data.page })\n        }).catch((err) => {})\n    }\n    error(err) {\n\n    }\n    componentDidMount() {\n\n        history.listen((location, action) => {\n            this.setState(location.state)\n        });\n        const state = history.location.state;\n        if (state)\n            this.setState({ url: state.url, feedId: state.feedId, articles: state.articles, feeds: state.feeds })\n        this.init()\n    };\n    init(attempts) {\n\n        this.setState({ init: false })\n        this.feeds().then(() => {\n            this.setState({ init: true })\n        }).catch((err) => {\n            this.setState({ init: false })\n            setTimeout(() => this.init(), 2000, attempts ? attempts++ : 1)\n        })\n\n        this.test('/feed/today')\n    }\n    test(path) {\n        return\n        return this.api(path, {}, { method: 'get' })\n            .then((res)=>{\n                console.log(res)\n            })\n            .catch((err) => {\n                //this.setState({error:err})\n                console.log(err)\n            })\n    }\n    onErrorClose(err){\n        this.setState({error:null})\n    }\n    onToggleView(type){\n        this.setState({view:type == 'full' ? 'mini' : 'full'})\n    }\n    render() {\n\n        const { articles, feeds, feedId, search, refreshing, loadingFeeds, init, error, pages, page, view } = this.state\n        const feed = feeds.filter((f) => f._id === feedId)[0] || {}\n        const loadingFeed = feedId !== undefined && feedId === refreshing\n        const fullView = view === 'full'\n\n        if (!init)\n            return <Loading message={'Starting up...'} loading={true}/>\n        return (\n            <div className=\"App\">\n                <div id=\"left\">\n                    <Search onClick={(url)=>this.addFeed(url)}/>\n                    {!loadingFeeds && !search.length && feeds.map((f, idx)=>\n                        <SourceCard\n                            key={f._id}\n                            name={f.name}\n                            url={f.url}\n                            id={f._id}\n                            unread={f.unread}\n                            count={f.count}\n                            refreshing={refreshing === f._id}\n                            onClick={()=>this.loadFeed(f._id)}\n                            onRemove={()=>this.deleteFeed(f._id)}\n                            onRefresh={()=>this.refreshFeed(f._id)}\n                            onUpdate={(id, name)=>this.updateFeed(id, name)}\n                            selected={f._id === feedId}\n                        />\n                    )}\n                    <Loading message={loadingFeeds} loading={loadingFeeds}/>\n                    {!feeds.length && <div className={'refresh'}><Button onClick={()=>this.feeds()} icon={'R'}/></div>} \n                </div>\n                <div id=\"right\">\n                    <div id={'feed-header'}>\n                        <div id={'feed-title'}>{feed.name}</div>\n\n                        <div id={'feed-tools'}>\n                            <Button onClick={()=>this.browse(-1)} icon={'-'}/>\n\n                            <div className={'button-spacer'}>{page + '/' + pages}</div>\n                            <Button onClick={()=>this.browse(1)} icon={'+'}/>\n                            <div className={'button-spacer'}></div>\n                            <Button onClick={()=>this.onToggleView(view)} icon={fullView ? <FiChevronUp/> : <FiChevronDown/>}/>\n                            <Button onClick={()=>this.toggleAllRead(feed._id)} icon={<BsCheckAll/>}/>\n                            <Button onClick={()=>this.refreshFeed(feed._id)} icon={<IoIosRefresh/>}/>\n                        </div>\n\n                    </div>\n                    <div id=\"feed\">\n                         <FeedCard\n                            name={feed.name}\n                            id={feed._id}\n                            articles={articles}\n                            refreshing={loadingFeed}\n                            view={view}\n                            onClick={(id, link)=>this.openLink(id, link)}\n                            onToggleRead={(id, read)=>this.onToggleRead(feedId, id, read)}\n                        />\n                    </div>\n\n                </div>\n                {error && <Error error={error} onClose={()=>this.onErrorClose(error)}/>}\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport { Router } from \"react-router-dom\";\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport history from './history'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router history={history}>\n        <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}